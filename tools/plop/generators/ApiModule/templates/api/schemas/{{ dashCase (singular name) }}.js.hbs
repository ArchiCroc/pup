import Uniforms from 'uniforms';
import SimpleSchema from 'simpl-schema';
import i18n from 'meteor/universe:i18n';

const {{ pascalCase (singular name) }}Schema = new SimpleSchema({
  {{#each schema ~}}
    {{~#compare this.type '&&' this.input}}
  {{@key}}: {
    type: {{this.type}},
    {{#compare this.input '!=' 'Hidden'}}
    label: () => i18n.__('{{ pascalCase @root.name }}.{{snakeCase @key}}_label'),
    {{/compare}}
    {{#compare this.defaultValue '!==' undefined}}
    defaultValue: {{this.defaultValue}},
    {{/compare}}
    {{~#if this.validate.optional}}
    optional: true,
    {{/if}}
    {{#if this.validate.max}}
    max: {{this.validate.max}},
    {{/if}}
    {{#if this.validate.min}}
    min: {{this.validate.min}},
    {{/if}}
    uniforms: {
      {{#compare this.input '==' 'Hidden'  }}
      type: 'hidden',
      {{else}}
      {{#compare this.type '!=' 'Boolean'  }}
      placeholder: () => i18n.__('{{ pascalCase @root.name }}.{{snakeCase @key}}_placeholder'),
      {{/compare}}
      {{/compare}}
    },
  },
    {{/compare~}}
  {{~/each}}
});

export default {{ pascalCase (singular name) }}Schema;
