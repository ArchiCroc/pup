#import "../fragments/{{ pascalCase pluralName }}.gql"

query {{ camelCase pluralName }}(
  $_ids: [String]
  $page: Int, 
  $pageSize: Int, 
  $search: String, 
  $sort: String, 
  $order: String,
{{#each schema.fields}}
  {{#if this.filterable}}
    {{#compare this.type 'in' 'String|Int|Float|Number'}}
  ${{ @key }}: [{{#compare this.type '===' 'Number'}}Float{{else}}{{this.type}}{{/compare}}],
    {{else}}
  ${{ @key }}: {{#compare this.type '===' 'Number'}}Float{{else}}{{this.type}}{{/compare}},
    {{/compare}}
  {{/if}}
{{/each}}
) {
  {{ camelCase pluralName }}(
    _ids: $_ids,
    page: $page, 
    pageSize: $pageSize, 
    search: $search, 
    sort: $sort, 
    order: $order,
{{#each schema.fields}}
  {{#if this.filterable}}
    {{ @key }}: ${{@key}},
  {{/if}}
{{/each}}
  ) {
    total
    {{ camelCase pluralName }} {
      {{primaryFieldKey}}
      {{#compare primaryFieldKey '!==' urlFieldKey}}{{urlFieldKey}}{{/compare}}
{{#each schema.fields ~}}
  {{~#compare this.showInTableView '!==' false '&&' @key '!==' primaryFieldKey}}
    {{~#compare this.input '||' this.showInTableView '&&' @key '!==' urlFieldKey }}
      {{#if dataIndex}}
      {{convertDataIndexToGraphqlSubQuery (concat @key '.' dataIndex) 3}}
      {{else}}
      {{@key}}
      {{/if}}
    {{/compare~}}
  {{/compare~}}
{{/each}}
    }
  }
}

query edit{{ pascalCase singularName }}(${{ primaryFieldKey }}: {{ primaryField.type }}{{#compare primaryFieldKey '!==' urlFieldKey }}, ${{ urlFieldKey }}: {{ urlField.type }}{{/compare}}) {
  {{ camelCase singularName }}({{ primaryFieldKey }}: ${{ primaryFieldKey }}{{#compare primaryFieldKey '!==' urlFieldKey }}, {{ urlFieldKey }}: ${{ urlFieldKey }}{{/compare}}) {
    ...{{ pascalCase singularName }}Attributes
  }
}

query {{ camelCase singularName }}(${{ primaryFieldKey }}: {{ primaryField.type }}{{#compare primaryFieldKey '!==' urlFieldKey }}, ${{ urlFieldKey }}: {{ urlField.type }}{{/compare}}) {
  {{ camelCase singularName }}({{ primaryFieldKey }}: ${{ primaryFieldKey }}{{#compare primaryFieldKey '!==' urlFieldKey }}, {{ urlFieldKey }}: ${{ urlFieldKey }}{{/compare}}) {
    ...{{ pascalCase singularName }}Attributes
  }
}
