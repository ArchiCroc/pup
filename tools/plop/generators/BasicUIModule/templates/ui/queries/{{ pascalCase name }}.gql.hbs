#import "../fragments/{{ pascalCase name }}.gql"

query {{ camelCase name }}(
  $_ids: [String]
  $page: Int, 
  $pageSize: Int, 
  $search: String, 
  $sort: String, 
  $order: String,
{{#each schema.fields}}
  {{#if this.filterable}}
    {{#compare this.type 'in' 'String|Int|Float|Number'}}
  ${{ @key }}: [{{#compare this.type '===' 'Number'}}Float{{else}}{{this.type}}{{/compare}}],
    {{else}}
  ${{ @key }}: {{#compare this.type '===' 'Number'}}Float{{else}}{{this.type}}{{/compare}},
    {{/compare}}
  {{/if}}
{{/each}}
) {
  {{ camelCase name }}(
    _ids: $_ids,
    page: $page, 
    pageSize: $pageSize, 
    search: $search, 
    sort: $sort, 
    order: $order,
{{#each schema.fields}}
  {{#if this.filterable}}
    {{ @key }}: ${{@key}},
  {{/if}}
{{/each}}
  ) {
    total
    {{ camelCase name }} {
      {{primaryKeyField}}
      {{#compare primaryKeyField '!==' urlKeyField}}{{urlKeyField}}{{/compare}}
{{#each schema.fields ~}}
  {{~#compare this.showInTableView '!==' false '&&' @key '!==' primaryKeyField}}
    {{~#compare this.input '||' this.showInTableView '&&' @key '!==' urlKeyField }}
      {{#if dataIndex}}
      {{convertDataIndexToGraphqlSubQuery (concat @key '.' dataIndex) 3}}
      {{else}}
      {{@key}}
      {{/if}}
    {{/compare~}}
  {{/compare~}}
{{/each}}
    }
  }
}

query edit{{ pascalCase (singular name) }}(${{ primaryKeyField }}: {{ primaryKeyType }}{{#compare primaryKeyField '!==' urlKeyField }}, ${{ urlKeyField }}: {{ urlKeyType }}{{/compare}}) {
  {{ camelCase (singular name) }}({{ primaryKeyField }}: ${{ primaryKeyField }}{{#compare primaryKeyField '!==' urlKeyField }}, {{ urlKeyField }}: ${{ urlKeyField }}{{/compare}}) {
    ...{{ pascalCase (singular name) }}Attributes
  }
}

query {{ camelCase (singular name) }}(${{ primaryKeyField }}: {{ primaryKeyType }}{{#compare primaryKeyField '!==' urlKeyField }}, ${{ urlKeyField }}: {{ urlKeyType }}{{/compare}}) {
  {{ camelCase (singular name) }}({{ primaryKeyField }}: ${{ primaryKeyField }}{{#compare primaryKeyField '!==' urlKeyField }}, {{ urlKeyField }}: ${{ urlKeyField }}{{/compare}}) {
    ...{{ pascalCase (singular name) }}Attributes
  }
}
