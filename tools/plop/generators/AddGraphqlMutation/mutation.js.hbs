  // {{mutationType}}
  {{mutationName}}: (parent, args, context) => {
    if (!user || !user._id || !checkUserRole(user._id, ['user'])) {
      throw new Error('Sorry, you must have permission to {{mutationName}} {{titleCase moduleName}}.');
    }

    const schema = {{singular moduleName}}Schema.pick({{#each mutationParamSegments}}'{{param}}'{{#unless @last}}, {{/unless}}{{/each}});
    const cleanDoc = schema.clean(args)
    schema.validate(cleanDoc);

    const { {{mutationParamSegments.0.param}} } = cleanDoc;

    const {{camelCase (singular moduleName)}} = {{moduleName}}.findOne({{mutationParamSegments.0.param}});

    if (!{{camelCase (singular moduleName)}}) {
      throw new Error('{{pascalCase (singular moduleName)}} not found');
    }

  
    const updateDoc = {
      {{#each mutationParamSegments}}
      // {{param}}: cleanDoc.{{param}},
      {{/each}}
      updatedById: context.user._id,
      updatedAtUTC: new Date(),
    };

    {{moduleName}}.update({ {{mutationParamSegments.0.param}} }, { $set: updateDoc });
    return Object.assign({{camelCase (singular moduleName)}}, updateDoc);
 
  },